var u=(y,f,n)=>new Promise((m,r)=>{var p=s=>{try{i(n.next(s))}catch(a){r(a)}},c=s=>{try{i(n.throw(s))}catch(a){r(a)}},i=s=>s.done?m(s.value):Promise.resolve(s.value).then(p,c);i((n=n.apply(y,f)).next())});import{_ as z,g as h,j as V,O as b,q as F,o as _,a as v,e as o,F as N,x as j,d as I,v as k,f as L,cT as O,cU as T,cV as U,w as q,A as M,ag as A}from"./bundle.0.0.2.js?v=0.6036900755232442";import{u as E}from"./chunk.4zk32.js";const H={class:"notify tpage"},P={class:"list"},R=["onClick"],$={class:"title"},G={class:"time"},J={key:0,class:"noMoreData"},K={__name:"index",setup(y){const{listDom:f,scolllDom:n,wrapperH:m,scroll:r,addScrollFun:p}=E(),c=h([]),i=V(),s=h(!1),a=h(!1),g=b({size:10,current:1}),d=b({show:!1,msg:{}}),w=()=>u(this,null,function*(){if(s.value)return;s.value=!0;const{current:l,pages:e,records:t,total:x}=yield T(g);c.value.push(...t),a.value=l>=e||c.value.length>=x,s.value=!1}),D=()=>{s.value||a.value||(g.current++,w())},C=()=>i.back(),B=l=>{d.msg=l,d.show=!0},S=l=>u(this,null,function*(){yield U({notificationId:l.id}).catch(()=>{}),l.read=!0});return F(()=>u(this,null,function*(){p(D),g.size=Math.max(Math.floor(m.value/62*1.5),10),w()})),(l,e)=>(_(),v("div",H,[o("div",{class:"topbar flex_b"},[o("div",{class:"flex_sx_center back hover_bg",tabindex:"0",onClick:C},e[2]||(e[2]=[o("span",{class:"iconfont icon-rollback",style:{"font-size":"20px"}},null,-1),o("span",{class:"text"},"返回",-1)])),e[3]||(e[3]=o("div",{class:"hover_light",tabindex:"0"},null,-1))]),o("div",{class:"list_wrapper",onScrollPassive:e[0]||(e[0]=(...t)=>k(r)&&k(r)(...t)),ref_key:"listDom",ref:f},[o("div",{ref_key:"scolllDom",ref:n},[o("div",P,[(_(!0),v(N,null,j(c.value,(t,x)=>(_(),v("div",{class:q(["item",{read:t.read}]),key:x,onClick:Q=>B(t)},[o("div",$,M(t.title),1),o("div",G,M(k(A)(t.createTime)),1)],10,R))),128))]),a.value?(_(),v("div",J,"没有更多了")):I("",!0)],512)],544),L(O,{show:d.show,"onUpdate:show":e[1]||(e[1]=t=>d.show=t),msg:d.msg,onClose:S},null,8,["show","msg"])]))}},Z=z(K,[["__scopeId","data-v-d374d081"]]);export{Z as default};
