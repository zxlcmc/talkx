var g=(x,m,r)=>new Promise((u,a)=>{var v=s=>{try{l(r.next(s))}catch(p){a(p)}},d=s=>{try{l(r.throw(s))}catch(p){a(p)}},l=s=>s.done?u(s.value):Promise.resolve(s.value).then(v,d);l((r=r.apply(x,m)).next())});import{I as R}from"./chunk.4zk22.js";import{_ as S,h as A,j as B,k as M,g as c,q as V,o as _,a as C,e as n,f,C as N,v as i,D as w,A as z,d as T,z as y,ck as U,ae as $,a9 as D}from"./bundle.0.0.2.js?v=0.6036900755232442";import{i as F,c as h}from"./chunk.4zk24.js";import{a as j}from"./chunk.4zk41.js";import{I as E}from"./chunk.4zk51.js";import{N as X}from"./chunk.4zk31.js";import{N as G}from"./chunk.4zk28.js";import"./chunk.4zk39.js";const H={class:"login tpage"},J={class:"row"},K={key:0,class:"info"},L={class:"text"},O={class:"Agreement"},P={class:"icon"},Q={class:"text"},W={__name:"index",setup(x){const m=A(),r=B(),u=M(),a=c(""),v=c(!1),d=c(null),l=c(!1),s=c("请输入正确的手机号码");V(()=>{d.value&&d.value.focus()});const p=(t=a.value)=>{if(!t){s.value="请输入正确的手机号码";return}if(j.phoneRule(t)){s.value="请输入正确的手机号码";return}return s.value="",!0},I=t=>(p(t),!0),b=()=>g(this,null,function*(){const{err:t,errMsg:e}=yield D(a.value);if(t)return u.error(e);u.success("验证码发送成功")}),q=()=>g(this,null,function*(){if(!l.value){u.warning("请仔细阅读协议并同意");return}if(!p()||v.value)return;v.value=!0;const{exist:t,errMsg:e}=yield U({phoneNum:a.value});if(e)return v.value=!1,u.error(e);const o={phone:a.value};t?(yield b(),r.push({name:"verify",query:o})):(m.query.inviteCode&&(o.inviteCode=m.query.inviteCode),r.push({name:"invite",query:o})),v.value=!1}),k=t=>{r.push({name:"agreement",query:{type:t}})};return(t,e)=>(_(),C("div",H,[e[10]||(e[10]=n("div",{class:"title"},"欢迎使用 TalkX",-1)),e[11]||(e[11]=n("p",{class:"desc"},"注册一个新的或登录你已经存在的账号。",-1)),n("div",J,[e[5]||(e[5]=n("div",{class:"row_title"},"使用你的手机号码注册或登录",-1)),f(i(X),{ref_key:"inputRef",ref:d,value:a.value,"onUpdate:value":e[0]||(e[0]=o=>a.value=o),style:N(i(F)),type:"phone",placeholder:"","allow-input":I},null,8,["value","style"]),s.value?(_(),C("div",K,[f(i(R),{size:"20",style:{"vertical-align":"sub"}},{default:w(()=>[f(i(E))]),_:1}),n("span",L,z(s.value),1)])):T("",!0)]),f(i($),{block:"",type:"info",class:"btn",onClick:q},{default:w(()=>e[6]||(e[6]=[y("继续")])),_:1}),n("div",O,[n("div",P,[f(i(G),{style:N(i(h)),checked:l.value,"onUpdate:checked":e[1]||(e[1]=o=>l.value=o)},null,8,["style","checked"])]),n("div",Q,[e[7]||(e[7]=y(" 我同意")),n("span",{onClick:e[2]||(e[2]=o=>k("user"))},"《用户协议》"),e[8]||(e[8]=y("、")),n("span",{onClick:e[3]||(e[3]=o=>k("privacy"))},"《隐私条款》"),e[9]||(e[9]=y("和")),n("span",{onClick:e[4]||(e[4]=o=>k("content"))},"《内容安全协议》")])])]))}},le=S(W,[["__scopeId","data-v-8c496b24"]]);export{le as default};
