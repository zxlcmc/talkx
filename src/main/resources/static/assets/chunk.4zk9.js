var I=(y,f,e)=>new Promise((v,s)=>{var m=n=>{try{c(e.next(n))}catch(x){s(x)}},l=n=>{try{c(e.throw(n))}catch(x){s(x)}},c=n=>n.done?v(n.value):Promise.resolve(n.value).then(m,l);c((e=e.apply(y,f)).next())});import{_ as S,u as j,g,i as P,c as N,q as V,t as q,o as u,a as _,F as R,x as T,w as k,z as A,A as h,d as L,f as M,D as B,e as a,B as E,v as G,C as W,G as D,k as O,l as U,a2 as H,n as J,s as K,au as Q,E as X,av as Y}from"./bundle.0.0.2.js?v=0.6036900755232442";import{N as Z}from"./chunk.4zk23.js";const ee=["onClick"],te={key:0},se={key:0,class:"tab_item item tab_list"},ae=["onClick"],ne={key:0},oe={__name:"index",props:{data:Array,tIndex:Number|String,width:{type:Number,default:100}},emits:["tabChange"],setup(y,{expose:f,emit:e}){j(r=>({"675a1e9d":$.value}));const v=e,s=y,m=g(7),l=g(null),c=g(!1),n=P("resize"),x=()=>{if(!l.value)return;const r=parseInt(window.getComputedStyle(l.value).width);let o=Math.floor(r/s.width);n.smallRef.value||(o=o-1),m.value=s.data.length>o?o-1:o};n.change(x);const $=N(()=>s.width+"px"),t=N(()=>({tabs:s.data.slice(0,m.value),list:s.data.slice(m.value)})),b=()=>{c.value=!1},p=r=>{v("tabChange",r),c.value=!1};return f({bodyClick:b}),V(()=>{x(),document.addEventListener("click",b)}),q(()=>{document.removeEventListener("click",b)}),(r,o)=>(u(),_("div",{class:"tabs_wrapper",ref_key:"wrapper",ref:l},[(u(!0),_(R,null,T(t.value.tabs,i=>(u(),_("div",{class:k(["tab_item item",{active:s.tIndex==i.id}]),key:i,onClick:F=>p(i)},[A(h(i.label)+" ",1),i.count?(u(),_("span",te," ("+h(i.count)+")",1)):L("",!0)],10,ee))),128)),t.value.tabs.length>5?(u(),_("div",se,[M(G(Z),{placement:"bottom",show:c.value,style:{padding:"4px","border-radius":"0px","background-color":"var(--tp_userList_bgcolor)"}},{trigger:B(()=>[a("div",{class:"text",onMouseover:o[0]||(o[0]=i=>c.value=!0),onClick:o[1]||(o[1]=E(i=>c.value=!0,["stop"]))},o[2]||(o[2]=[a("span",{class:"iconfont icon-option-horizontal"},null,-1)]),32)]),default:B(()=>[a("div",{class:k(["list_wrapper",{small:G(n).smallRef.value}])},[(u(!0),_(R,null,T(t.value.list,(i,F)=>(u(),_("div",{class:k(["tab_li item",{active:s.tIndex==i.id}]),key:F,onClick:w=>p(i)},[A(h(i.label)+" ",1),i.count?(u(),_("span",ne," ("+h(i.count)+")",1)):L("",!0)],10,ae))),128))],2)]),_:1},8,["show"])])):L("",!0)],512))}},le=S(oe,[["__scopeId","data-v-cff83296"]]);const ie={class:"FriendCard"},ce={class:"avater"},re=["src"],de={class:"name"},ue={class:"desc"},_e={class:"tag"},ve={key:0,class:"badge"},pe={__name:"FriendCard",props:["data"],emits:["collect"],setup(y,{emit:f}){const e=y,v=f,s=()=>v("collect",e.data);return(m,l)=>(u(),_("div",ie,[a("div",ce,[a("img",{src:e.data.avatar,alt:""},null,8,re)]),a("div",de,h(e.data.name),1),a("div",{class:"collect",onClick:E(s,["stop"]),style:W({cursor:e.data.followed?"auto":"pointer"})},[a("span",{class:k(["iconfont",e.data.followed?"icon-heart-filled":"icon-heart"])},null,2)],4),a("div",ue,h(e.data.intro),1),a("div",_e,[l[0]||(l[0]=a("span",{class:"symbol"},"#",-1)),A(h(e.data.tag),1)]),e.data.friendType==2?(u(),_("div",ve,l[1]||(l[1]=[a("div",{class:"text"},"GPTs",-1)]))):L("",!0)]))}},fe=S(pe,[["__scopeId","data-v-ebf6feaa"]]);const me=["onClick"],we=150,be=180,ge={__name:"FriendList",props:["data"],emits:["followed","itemClick"],setup(y,{expose:f,emit:e}){const v=P("resize"),s=y,m=e,l=g({width:"150px"}),c=g(null),n=()=>{if(!c.value)return;const t=parseInt(window.getComputedStyle(c.value).width);if(v.smallRef.value)return l.value.width=(t-20)/2+"px";const b=Math.floor(t/we),p=Math.floor(t/be);let r=Math.max(b,p);r=r>5?5:r;const o=(t-5*2*r)/r;l.value.width=o+"px"};v.change(()=>{D(()=>n())});const x=t=>m("followed",t),$=t=>m("itemClick",t);return V(()=>{n()}),f({computedW:n}),(t,b)=>(u(),_("div",{class:"FriendList",ref_key:"wrapper",ref:c},[(u(!0),_(R,null,T(s.data,p=>(u(),_("div",{class:"item",key:p,style:W(l.value),onClick:r=>$(p)},[M(fe,{data:p,onCollect:r=>x(p)},null,8,["data","onCollect"])],12,me))),128))],512))}},xe=S(ge,[["__scopeId","data-v-6599ab79"]]);const ye={class:"content"},he={class:"rows"},Ce={class:"lists"},ke={__name:"index",setup(y){const f=g([]),e=g(!1),v=g(null),s=g(null),m=O(),l=U(),c=P("resize"),n=H(),$=J().appContext.config.globalProperties.$bus;let t=!1;const b=g({tag:""}),p=w=>I(this,null,function*(){f.value=yield Q(b.value),s.value&&D(()=>{s.value.computedW()}),e.value=!0}),r=()=>{v.value&&v.value.bodyClick()},o=N(()=>{let w=0;const d=n.tags.map(({count:C,name:z})=>(w+=C,{label:z,count:C,id:z}));return[{label:"全部",count:w,id:""},...d]}),i=w=>I(this,null,function*(){if(t)return;t=!0,e.value=!1;const d=o.value.find(C=>C.id==w.id);d&&(b.value.tag=d.id,yield X(200),yield p()),t=!1}),F=w=>I(this,null,function*(){if(t||w.followed)return;t=!0;const d=yield Y({friendId:w.id});if(d.err){t=!1,d.errMsg&&m.error(d.errMsg);return}const C=f.value.find(z=>z.id===w.id);C.followed=1,l.addFriends(d),$.emit("friendFollow",d),t=!1});return V(()=>I(this,null,function*(){yield p(),setTimeout(()=>K("AI_Plaza"),300)})),(w,d)=>(u(),_("div",{class:k(["FriendsPlaza",{small:G(c).smallRef.value}]),onClick:r},[a("div",ye,[d[0]||(d[0]=a("div",{class:"title"},"AI广场",-1)),d[1]||(d[1]=a("div",{class:"desc"},"精选高质量AI，使交流变得无限可能",-1)),a("div",he,[M(le,{ref_key:"tabsRef",ref:v,data:o.value,tIndex:b.value.tag,onTabChange:i},null,8,["data","tIndex"])]),a("div",Ce,[a("div",{class:k(["list_wrapper",{show:e.value}])},[M(xe,{ref_key:"friendRef",ref:s,data:f.value,onFollowed:F},null,8,["data"])],2)])])],2))}},ze=S(ke,[["__scopeId","data-v-9899cdf2"]]);export{ze as default};
