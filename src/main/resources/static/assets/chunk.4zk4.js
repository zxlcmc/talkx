var C=(k,m,p)=>new Promise((v,n)=>{var a=d=>{try{u(p.next(d))}catch(t){n(t)}},r=d=>{try{u(p.throw(d))}catch(t){n(t)}},u=d=>d.done?v(d.value):Promise.resolve(d.value).then(a,r);u((p=p.apply(k,m)).next())});import{v as X}from"./chunk.4zk41.js";import{O as J,c as N,a9 as ie,aa as ce,ab as ue,j as V,g as R,K as de,o as c,a as h,e,z as M,f as j,D as W,F as G,x as L,w as Q,v as _,A as b,C as F,ac as _e,i as Y,b as I,_ as B,ad as pe,a1 as Z,k as ee,m as te,p as ve,q as se,t as fe,d as S,ae,af as ye,ag as me,a4 as he,h as ge,G as be,ah as xe,ai as ke}from"./bundle.0.0.2.js?v=0.6036900755232442";import{N as $e}from"./chunk.4zk42.js";import{N as ne}from"./chunk.4zk28.js";import{T as we}from"./chunk.4zk40.js";import{U as Ce}from"./chunk.4zk29.js";import{N as q}from"./chunk.4zk31.js";import{c as Te}from"./chunk.4zk43.js";import{c as Re}from"./chunk.4zk38.js";import{u as Ue}from"./chunk.4zk32.js";import{i as Me}from"./chunk.4zk24.js";import"./chunk.4zk27.js";import"./chunk.4zk23.js";import"./chunk.4zk39.js";const z={name:{placeholder:"请输入名称",verity:[{type:"empty",message:"请输入名称"},{type:"length",max:10,min:2,message:"字符长度不能超过10位或者小于2位"}]},email:{placeholder:"请输入邮箱",verity:[{type:"empty",message:"请输入邮箱"},{type:"emailRule",message:"请输入正确的邮箱"}]},ApiKey:{placeholder:"请输入ApiKey",verity:[]},proxy_base_url:{placeholder:"请输入代理地址",verity:[]},phone:{placeholder:"请输入手机号",verity:[{type:"empty",message:"请输入手机号"},{type:"phoneRule",message:"请输入正确的手机号"}]},code:{placeholder:"",verity:[{type:"empty",message:"请输入验证码"}]}};function Pe(k,m){const p=l=>C(this,null,function*(){const{err:i,errMsg:s}=yield ie(l);if(i){m.error(s);return}return m.success("验证码发送成功"),!0}),v=(l,i)=>C(this,null,function*(){const{err:s,errMsg:o}=yield ce({phoneNum:l,code:i});if(s){m.error(o);return}return!0}),n=l=>C(this,null,function*(){const{err:i,errMsg:s}=yield ue({phoneNum:l});if(i){m.error(s);return}return!0}),a=J({step:0,config:[{rightText:"下一步",disabled:!0,value:"",obj:z.phone,info:()=>"你正在更换手机号码，我们将向下方的手机发送一条验证码。"},{rightText:"下一步",value:"",obj:z.code,info:()=>`我们已经向 ${a.config[a.step-1].value} 发送了一个六位数的验证码。该码即将过期。`},{rightText:"下一步",value:"",obj:z.phone,info:()=>"请输入新的手机号码，我们将向这个手机发送一条验证码。"},{rightText:"完成",value:"",obj:z.code,info:()=>`我们已经向 ${a.config[a.step-1].value} 发送了一个六位数的验证码。该码即将过期。`}]}),r=N(()=>k=="phone"),u=N(()=>a.config[a.step]||{info:()=>{}});return{isPhone:r,phoneObj:a,currPhone:u,phonePrev:(l=1)=>{if(a.step-l>=0)a.step-=l;else return!0},phoneOver:l=>C(this,null,function*(){let i={all:!1,result:!1};const s=yield X(l,u.value.obj.verity);if(s)return m.warning(s),i;if(a.config[a.step].value=l,[0,2].includes(a.step)){if([2].includes(a.step)&&!(yield n(l))||!(yield p(l)))return i}else{const o=a.config[a.step-1].value;if(!(yield v(o,l)))return i;i.phoneNum=o}return a.step++,Object.assign(i,{result:!0,all:a.step>=a.config.length}),i})}}const Ie={class:"model"},je={class:"list"},Ne=["onClick"],ze={class:"model flex_b"},Ae={class:"model_text"},De={class:"text"},Se={class:"cTags flex"},Oe={__name:"Model",props:["selected"],emits:["update:selected"],setup(k,{emit:m}){const p=V(),v=k,n=m,a=window.__talkx__.openUrl,r=i=>{i.canSelection&&n("update:selected",i.model)},u=R([]);de().then(i=>u.value=i.map(s=>{const{commentTags:o=[]}=s;return Object.assign({},s,{commentTags:o.map(({color:f,bgColor:U,name:g})=>({name:g,style:{color:f,backgroundColor:U}}))})}));const d=()=>{p.push({name:"userEdit",query:{type:"api_key"}})},t=()=>{a(_e)},l={"--n-border-radius":"0px","--n-td-text-color":" var(--tp_textcolor)","--n-th-text-color":" var(--tp_textcolor)","--n-td-color":"var(--tp_footer_bgcolor)","--n-th-color":"var(--tp_footer_bgcolor)","--n-merged-border-color":"var(--tp_aside_border_color)"};return(i,s)=>(c(),h("div",Ie,[e("div",{class:"desc"},[s[3]||(s[3]=e("div",{class:"section"}," 不同的模型，提问和回答都需要消耗一定数量的蒜粒。蒜粒可以通过邀请好友注册或购买获得。 ",-1)),e("div",{class:"section"},[s[0]||(s[0]=M(" 使用自备的 ApiKey 不会消耗蒜粒。现在 ")),e("span",{class:"set_text",onClick:d},"去设置")]),e("div",{class:"section"},[s[1]||(s[1]=M(" 不知道怎么选择？")),e("span",{class:"model_look",onClick:t},"「点击这里」"),s[2]||(s[2]=M(" 去查看模型的简介 "))])]),e("div",je,[j(_($e),{class:"listtable",style:l},{default:W(()=>[s[4]||(s[4]=e("thead",null,[e("tr",null,[e("th",null,"模型"),e("th",null,"提问"),e("th",null,"回答")])],-1)),e("tbody",null,[(c(!0),h(G,null,L(u.value,o=>(c(),h("tr",{key:o.model,onClick:f=>r(o),class:Q({disabled:!o.canSelection})},[e("td",ze,[e("div",Ae,[j(_(ne),{checked:o.model==v.selected,disabled:!o.canSelection},null,8,["checked","disabled"]),e("span",De,b(o.model),1)]),e("div",Se,[(c(!0),h(G,null,L(o.commentTags,f=>(c(),h("div",{class:"tagItem",key:f.name,style:F(f.style)},b(f.name),5))),128))])]),e("td",null,b(o.inputCoins>0?o.inputCoins:"免费"),1),e("td",null,b(o.outputCoins>0?o.outputCoins:"免费"),1)],10,Ne))),128))])]),_:1}),s[5]||(s[5]=e("div",{class:"desc"},[M(" 计算单位为：每 1k tokens"),e("br"),M(" 示例：0.03 表示 1k tokens 所需要的蒜粒值为：0.03 ")],-1))])]))}},Ge={__name:"AboutUs",setup(k){const m=V(),p=Y("resize"),v=[{id:1,type:"",text:"协议条款",tag:!0},{id:2,type:"user",text:"用户协议",rightText:""},{id:3,type:"privacy",text:"隐私条款",rightText:""},{id:4,type:"content",text:"内容安全协议",rightText:""},{id:5,type:"pay",text:"支付协议",rightText:""}],n=({type:a,tag:r})=>{if(r)return;let u="agreement";p.smallRef.value||(u="d_"+u),m.push({name:u,query:{type:a}})};return(a,r)=>(c(),I(we,{list:v,onRightClick:n}))}};const Le={class:"faceback"},Fe={class:"row flex_b"},Be={class:"right"},He={class:"answer_area"},Ee={class:"row flex_b"},Ke={class:"right"},qe={class:"answer_area imgs"},Ve={class:"answer_area"},We={__name:"Faceback",props:["inputstyle"],setup(k,{expose:m}){const v=k.inputstyle,n=J({content:"",image:"",contactPhone:""}),a={content:[{type:"empty",message:"请输入问题描述"},{type:"length",max:200,min:10,message:"请填写10个字以上的问题描述以便我们提供更好的帮助"}],contactPhone:[{type:"phoneRule",message:"请输入正确的手机号"}]},r=N(()=>n.image.split(",").filter(t=>t).length);return m({getForm:()=>C(this,null,function*(){const d=Object.entries(a).map(([t,l])=>({key:t,rules:l}));for(let t=0;t<d.length;t++){const{key:l,rules:i}=d[t],s=yield X(n[l],i);if(s)return{err:!0,errMsg:s}}return{err:!1,data:n}})}),(d,t)=>(c(),h("div",Le,[e("div",Fe,[t[3]||(t[3]=e("div",{class:"left"},"问题和意见",-1)),e("div",Be,b(n.content.length)+"/200",1)]),e("div",He,[j(_(q),{type:"textarea",autosize:{minRows:5,maxRows:5},ref:"inputRef",maxlength:"200",value:n.content,"onUpdate:value":t[0]||(t[0]=l=>n.content=l),style:F(_(v)),placeholder:"请填写10个字以上的问题描述以便我们提供更好的帮助"},null,8,["value","style"])]),e("div",Ee,[t[4]||(t[4]=e("div",{class:"left"},"图片（选填，提供问题截图）",-1)),e("div",Ke,b(r.value)+"/4",1)]),e("div",qe,[j(Ce,{imgs:n.image,"onUpdate:imgs":t[1]||(t[1]=l=>n.image=l),max:4,size:1024*1024*5},null,8,["imgs"])]),t[5]||(t[5]=e("div",{class:"row flex_b"},[e("div",{class:"left"},"联系电话")],-1)),e("div",Ve,[j(_(q),{maxlength:"11",value:n.contactPhone,"onUpdate:value":t[2]||(t[2]=l=>n.contactPhone=l),style:F(_(v)),placeholder:"选填，便于我们与你联系"},null,8,["value","style"])])]))}};const Xe={class:"proxyUrl"},Je={__name:"ProxyUrl",setup(k){const m=window.__talkx__.openUrl,p=()=>{m(pe)};return(v,n)=>(c(),h("div",Xe,[e("span",{class:"model_look",onClick:p}," [点击这里] "),n[0]||(n[0]=M("查看代理设置说明。 "))]))}},Qe=B(Je,[["__scopeId","data-v-a39810cb"]]),Ye=()=>C(void 0,null,function*(){return Z({url:"/user/get_invite_reward",method:"GET",params:{}})}),Ze=()=>C(void 0,null,function*(){return Z({url:"/user/coin_catalog",method:"GET",params:{}})}),et=k=>C(void 0,null,function*(){return Z({url:"/coin_bill/search",method:"GET",params:k})});const tt={class:"my_hashrate"},st={class:"number"},at={class:"list"},ot=["onClick"],nt={class:"label"},lt={class:"number"},rt={key:0,class:"right"},it={key:0},ct={key:1,class:"flex_end"},ut={class:"old_price"},dt={class:"limit_time"},_t={class:"bottom"},pt={__name:"MyHashrate",setup(k){const m=Y("resize"),p=V(),v=ee(),n=te(),{showToast:a,closeWatch:r,clearWatch:u}=ve(),d=R([]),t=R("");let l,i=!1;const s=()=>C(this,null,function*(){if(i)return;i=!0;const{orderId:g}=yield Te({catalogId:t.value}).catch(x=>(v.error("订单创建失败"),i=!1,{}));if(!g)return;let $="pay";m.smallRef.value||($="d_"+$),p.push({name:$,query:{order:g}})}),o=[{coins:"充值蒜粒",tag:!0}];(()=>C(this,null,function*(){try{n.getUser(!0)}catch($){console.log("获取蒜粒err",$)}const g=yield Ze();t.value=g[0].catalogId,d.value=[...o,...g]}))(),se(()=>{r("auto",g=>C(this,null,function*(){g&&p.push({name:"pay",query:{order:l}}),i=!1}))}),fe(()=>{u()});const U=g=>{g.tag||(t.value=g.catalogId)};return(g,$)=>(c(),h("div",tt,[e("div",st,b(_(n).coins),1),e("div",at,[(c(!0),h(G,null,L(d.value,(x,A)=>(c(),h("div",{class:Q(["item flex_b",{tag:x.tag}]),key:x.catalogId||A,onClick:H=>U(x)},[e("div",nt,[x.tag?S("",!0):(c(),I(_(ne),{key:0,checked:t.value==x.catalogId,onUpdateChecked:H=>t.value=x.catalogId},null,8,["checked","onUpdateChecked"])),e("span",lt,b(x.coins)+" "+b(x.tag?"":"个蒜粒"),1)]),x.tag?S("",!0):(c(),h("div",rt,[x.price==x.marketPrice?(c(),h("div",it,b(x.price)+"元",1)):(c(),h("div",ct,[e("div",ut,"原价"+b(x.marketPrice)+"元",1),$[0]||($[0]=e("div",{class:"line"},null,-1)),e("div",dt,"限时"+b(x.price)+"元",1)]))]))],10,ot))),128))]),e("div",_t,[j(_(ae),{block:"",type:"info",class:"btn",onClick:s},{default:W(()=>$[1]||($[1]=[M(" 立即下单 ")])),_:1}),$[2]||($[2]=e("div",{class:"annotation"},[e("div",null,"【注意事项】"),e("div",null," 1、一个蒜粒约等于GPT-4新模型的7.5万个提问单词或者2.5万个回答单词； "),e("div",null,"2、不同模型的计算额度请到个人中心-默认模型查看；"),e("div",null,"3、虚拟产品不支持退款；"),e("div",null," 4、蒜粒的售价会随着官方、市场及成本等多方面因素的变化随时调整，不另做通知。 ")],-1))])]))}},vt=B(pt,[["__scopeId","data-v-33e05801"]]);const ft={class:"invite_rewards"},yt={class:"invite_desc"},mt={class:"invite_area"},ht={class:"text"},gt={__name:"InviteRewards",setup(k){const m=ee(),p=te(),v=["可免费使用的AI编程助手，支持GPT-4。赶快注册免费体验！","超级好用的GPT编程助手，完全免费，还支持GPT-4。点击链接注册还有奖励","免费畅享AI编程助手，开启编程新境界，更有GPT-4等你来玩！","AI编程助手助你免费掌握技能，开发效率起飞，邀请好友一起来体验！","探索AI编程助手的无限可能，尽在TalkX！赶快注册免费使用吧！","想突破编程瓶颈？想更快学习技术？还不快加入TalkX，借助GPT-4的力量，迈向未来！","革命性的AI编程助手已诞生！立即免费加入，还能解锁GPT-4的惊喜功能！"],n=R(""),a=R(""),r=N(()=>{var s;return(s=p.user)==null?void 0:s.inviteUrl});let u=1;const d=v.map((s,o)=>o),t=()=>{const s=d.filter(f=>f!==u),o=ye(0,s.length-1);n.value=v[s[o]],u=s[o]};t();const l=s=>Re(s).then(()=>m.success("复制成功"));return(()=>C(this,null,function*(){a.value=yield Ye()}))(),(s,o)=>(c(),h("div",ft,[e("div",yt," 通过下面这个邀请码注册的用户，你和邀请者都将获得 "+b(a.value)+" 蒜粒。 ",1),e("div",{class:"invite_code",onClick:o[0]||(o[0]=f=>l(_(p).inviteCode))},b(_(p).inviteCode),1),e("div",mt,[e("div",{class:"flex_b"},[o[3]||(o[3]=e("div",{class:""},"邀请文案",-1)),e("div",{class:"exchange hover_bg flex_sx_center",onClick:t},o[2]||(o[2]=[e("span",{class:"iconfont icon-refresh"},null,-1),M("换一个")]))]),e("div",ht,[M(b(n.value)+" ",1),e("span",null,b(r.value),1)]),j(_(ae),{block:"",type:"info",class:"btn",onClick:o[1]||(o[1]=f=>l(n.value+" "+r.value))},{default:W(()=>o[4]||(o[4]=[M("复制邀请文案")])),_:1})])]))}},bt=B(gt,[["__scopeId","data-v-5be94535"]]);const xt={class:"list"},kt={class:"top flex_b"},$t={class:"type"},wt={class:"number"},Ct={class:"bottom flex_b"},Tt={class:"time"},Rt={class:"ext"},Ut={__name:"RecordList",props:["list","tabs"],setup(k){const m=k,p=v=>{const n=m.tabs.find(a=>a.type==v.type);return n?n.name:""};return(v,n)=>(c(),h("div",xt,[(c(!0),h(G,null,L(m.list,(a,r)=>(c(),h("div",{class:"item",key:r},[e("div",kt,[e("div",$t,b(p(a)),1),e("div",wt,b(a.value),1)]),e("div",Ct,[e("div",Tt,b(_(me)(a.createTime)),1),e("div",Rt,b(a.billTitle),1)])]))),128))]))}},Mt=B(Ut,[["__scopeId","data-v-2fa9f12a"]]);const Pt={class:"hashrate_record"},It={class:"tabs flex_b"},jt=["onClick"],Nt={key:0,class:"noMoreData"},zt={key:0,class:"loading"},At={__name:"HashrateRecord",setup(k){const{listDom:m,scolllDom:p,wrapperH:v,scroll:n,addScrollFun:a}=Ue(),r=[{type:"",name:"全部"},{type:1,name:"消耗"},{type:2,name:"充值"},{type:3,name:"奖励"}],u=R([]),d=R(!1),t=J({type:"",current:1,size:10});let l=R(!1);const i=()=>C(this,null,function*(){if(d.value)return;d.value=!0;const{total:f,size:U,current:g,pages:$,records:x}=yield et(t);l.value=g>=$||u.value.length>=f,u.value.push(...x),d.value=!1}),s=f=>{d.value||(t.type=f,t.current=1,l.value=!1,u.value=[],i())},o=()=>{d.value||l.value||(t.current++,i())};return se(()=>{a(o),t.size=Math.max(Math.floor(v.value/65*1.5),10),i()}),he(()=>v.value,()=>{}),(f,U)=>(c(),h("div",Pt,[e("div",It,[(c(),h(G,null,L(r,g=>e("div",{class:Q(["tab-item",{active:t.type==g.type}]),key:g.type,onClick:$=>s(g.type)},b(g.name),11,jt)),64))]),e("div",{class:"list_wrapper",onScrollPassive:U[0]||(U[0]=(...g)=>_(n)&&_(n)(...g)),ref_key:"listDom",ref:m},[e("div",{ref_key:"scolllDom",ref:p},[j(Mt,{list:u.value,tabs:r},null,8,["list"]),_(l)?(c(),h("div",Nt,"没有更多了")):S("",!0)],512),d.value&&u.value.length>t.size?(c(),h("div",zt," loading...... ")):S("",!0)],544)]))}},Dt=B(At,[["__scopeId","data-v-ffc271a7"]]);const St={class:"userEdit tpage"},Ot={class:"topbar flex_b flex_sx_center"},Gt={key:0,class:"text"},Lt={key:0,class:"right"},Ft={key:1,class:"phone_area"},Bt={class:"phone_info"},os={__name:"Edit",setup(k){const m=ge(),p=V(),v=ee(),n=te(),a=Y("resize"),r=N(()=>m.query.type),{isPhone:u,phonePrev:d,phoneObj:t,phoneOver:l,currPhone:i}=Pe(r.value,v),s=N(()=>{let w="完成";return u.value?w=i.value.rightText:r.value==="faceback"&&(w="提交"),w}),o=Object.assign(Me,{fontSize:"var(--tp_size)",lineHeight:"50px","--n-border":"none","--n-border-hover":"none","--n-border-focus":"none",backgroundColor:"var(--tp_footer_bgcolor)","--n-border-radius":"0px","--n-border-disabled":"none"}),f=R(""),U=R(null),g=R(null),$=N(()=>["aboutus","invite_rewards","my_hashrate","hashrate_record"].includes(r.value)),x={name:z.name,email:z.email,api_key:z.ApiKey,proxy_base_url:z.proxy_base_url},A=N(()=>x[r.value]),H=()=>be(()=>U.value&&U.value.focus());se(()=>H());const E=R("");n.getUser().then(w=>{if(A.value){let y=r.value;y={api_key:"apiKey",proxy_base_url:"proxyBaseUrl"}[y]||y,f.value=w[y]}else u.value&&t.step==0?f.value=w.phoneNum:r.value==="model"&&(E.value=w.model)});let P=R(!1);const le=()=>{if(P.value)return;if(P.value=!0,u.value){const y=t.step==2?2:1;if(!d(y)){t.step===0&&(f.value=i.value.value),P.value=!1;return}}let w="user";a.smallRef.value||(w="d_"+w),xe(p,{name:w})},O=w=>{P.value=!1,v.warning(w)},re=()=>C(this,null,function*(){if(P.value)return;if(P.value=!0,A.value){const y=f.value.trim(),T=yield X(y,A.value.verity);if(T)return O(T);let D=yield n.setUser({field:r.value,value:y});if(D.errMsg)return O(D.errMsg)}else if(u.value){const y=f.value.trim(),{all:T,result:D,phoneNum:K}=yield l(y);if(!D)return P.value=!1;if(D&&!T){f.value="",H(),P.value=!1;return}let oe=yield n.setUser({field:"phone_num",value:K,extra:y});if(oe.errMsg)return O(oe.errMsg);v.success("手机号修改成功")}else if(r.value==="model"){const{errMsg:y}=yield n.setUser({field:r.value,value:E.value});if(y)return O(y)}else if(r.value==="faceback"){const{err:y,errMsg:T,data:D}=yield g.value.getForm();if(T)return O(T);const K=yield ke(D);if(K.errMsg)return O(K.errMsg);v.success("反馈成功，感谢你的反馈")}P.value=!1;let w="user";a.smallRef.value||(w="d_"+w),p.push({name:w})});return(w,y)=>(c(),h("div",St,[e("div",Ot,[e("div",{class:"flex_sx_center back hover_bg",tabindex:"0",onClick:le},[(!_(u)||_(t).step==0)&&!$.value?(c(),h("span",Gt,"取消")):(c(),h(G,{key:1},[y[3]||(y[3]=e("span",{class:"iconfont icon-rollback"},null,-1)),y[4]||(y[4]=e("span",{class:"text"},"返回",-1))],64))]),$.value?S("",!0):(c(),h("div",Lt,[j(_(ae),{block:"",type:"info",class:"btn",onClick:re},{default:W(()=>[M(b(s.value),1)]),_:1})]))]),A.value?(c(),I(_(q),{key:0,ref_key:"inputRef",ref:U,value:f.value,"onUpdate:value":y[0]||(y[0]=T=>f.value=T),style:F(_(o)),placeholder:A.value.placeholder},null,8,["value","style","placeholder"])):r.value==="phone"?(c(),h("div",Ft,[e("div",Bt,b(_(i).info()),1),j(_(q),{ref_key:"inputRef",ref:U,style:F([{"text-align":"center"},_(o)]),disabled:_(P)||_(i).disabled,value:f.value,"onUpdate:value":y[1]||(y[1]=T=>f.value=T),placeholder:_(i).obj.placeholder},null,8,["disabled","value","style","placeholder"])])):r.value==="faceback"?(c(),I(We,{key:2,ref_key:"facebackRef",ref:g,inputstyle:_(o)},null,8,["inputstyle"])):r.value==="model"?(c(),I(Oe,{key:3,selected:E.value,"onUpdate:selected":y[2]||(y[2]=T=>E.value=T)},null,8,["selected"])):r.value==="aboutus"?(c(),I(Ge,{key:4})):r.value==="my_hashrate"?(c(),I(vt,{key:5})):r.value==="invite_rewards"?(c(),I(bt,{key:6})):r.value==="hashrate_record"?(c(),I(Dt,{key:7})):S("",!0),r.value==="proxy_base_url"?(c(),I(Qe,{key:8})):S("",!0)]))}};export{os as default};
