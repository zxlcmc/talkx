var T=Object.defineProperty,A=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var I=(o,s,e)=>s in o?T(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,N=(o,s)=>{for(var e in s||(s={}))L.call(s,e)&&I(o,e,s[e]);if(k)for(var e of k(s))j.call(s,e)&&I(o,e,s[e]);return o},S=(o,s)=>A(o,D(s));var g=(o,s,e)=>new Promise((f,d)=>{var m=a=>{try{n(e.next(a))}catch(u){d(u)}},i=a=>{try{n(e.throw(a))}catch(u){d(u)}},n=a=>a.done?f(a.value):Promise.resolve(a.value).then(m,i);n((e=e.apply(o,s)).next())});import{_ as E}from"./chunk.4zk21.js";import{I as F}from"./chunk.4zk22.js";import{_ as U,h as G,j as H,k as J,l as K,m as O,g as p,c as P,q as Q,o as w,a as b,e as r,A as h,f as v,C as W,v as c,D as q,d as X,z as x,a9 as Y,ae as Z}from"./bundle.0.0.2.js?v=0.6036900755232442";import{i as $}from"./chunk.4zk24.js";import"./chunk.4zk52.js";import{I as ee}from"./chunk.4zk51.js";import{N as se}from"./chunk.4zk31.js";import"./chunk.4zk39.js";const te={class:"verify tpage"},oe={class:"row"},ae={class:"row_title"},ne={key:0,class:"info"},le={class:"text"},re={__name:"index",setup(o){const s=G(),e=H(),f=J(),d=K(),m=O(),i=p(""),n=p("请输入验证码"),a=p(!1),u=p(null),_=P(()=>s.query.phone),B=()=>g(this,null,function*(){a.value=!0;const{err:l,errMsg:t}=yield Y(_.value);if(l){n.value=t,a.value=!1;return}f.success("验证码发送成功"),a.value=!1});Q(()=>{u.value&&u.value.focus()});const C=(l=i.value)=>{if(!l){n.value="请输入验证码";return}return n.value="",!0},M=l=>(C(l),!0);let y=!1;const R=()=>g(this,null,function*(){if(y||!C())return;y=!0;const{err:l,errMsg:t}=yield m.login({phoneNum:_.value,code:i.value,inviteCode:s.query.inviteCode});l?n.value=t:(d.uploadLocaSession(),e.push({name:"dialogue",query:{type:"add",reload:1}})),y=!1}),V=()=>{e.back()};return(l,t)=>(w(),b("div",te,[t[4]||(t[4]=r("img",{class:"logo",src:E,alt:""},null,-1)),t[5]||(t[5]=r("div",{class:"title"},"请检查您的短信以获取验证码。",-1)),r("div",oe,[r("div",ae,"我们已经向 "+h(_.value)+" 发送了一个六位数的验证码。该码即将过期。",1),v(c(se),{ref_key:"inputRef",ref:u,value:i.value,"onUpdate:value":t[0]||(t[0]=z=>i.value=z),style:W(S(N({},c($)),{textAlign:"center"})),type:"phone",placeholder:"","allow-input":M},null,8,["value","style"]),n.value?(w(),b("div",ne,[v(c(F),{size:"20",style:{"vertical-align":"sub"}},{default:q(()=>[v(c(ee))]),_:1}),r("span",le,h(n.value),1)])):X("",!0)]),v(c(Z),{block:"",type:"info",class:"btn",onClick:R},{default:q(()=>t[1]||(t[1]=[x("提交")])),_:1}),r("div",{class:"tips"},[t[2]||(t[2]=x("没有收到验证码？")),r("span",{class:"text",onClick:B},"重新发送"),t[3]||(t[3]=x(" 或者 ")),r("span",{class:"text",onClick:V},"返回上一页")])]))}},ye=U(re,[["__scopeId","data-v-91937216"]]);export{ye as default};
