var y=(_,g,s)=>new Promise((x,a)=>{var p=r=>{try{c(s.next(r))}catch(d){a(d)}},u=r=>{try{c(s.throw(r))}catch(d){a(d)}},c=r=>r.done?x(r.value):Promise.resolve(r.value).then(p,u);c((s=s.apply(_,g)).next())});import{i as N,g as L,h as O,j as q,l as z,m as A,a8 as E,n as V,p as j,O as D,c as f,q as K,t as M,o as P,a as W,e as o,f as h,D as v,v as F,Y as H,Z as I,B as Y}from"./bundle.0.0.2.js?v=0.6036900755232442";import{T as Z}from"./chunk.4zk40.js";import{U as $}from"./chunk.4zk29.js";import{a as G}from"./chunk.4zk27.js";import"./chunk.4zk23.js";import"./chunk.4zk39.js";const J={class:"userPgee tpage"},Q={class:"content"},X={class:"avater"},ee=["src","onClick"],le={__name:"index",setup(_){const g=N("resize"),s=L(""),x=O(),a=q(),p=z(),u=A(),c=E(),d=V().appContext.config.globalProperties.$bus,{showToast:m,closeWatch:b,clearWatch:T}=j(),n=D([{id:1,type:"name",text:"名字",rightText:"未设置"},{id:2,type:"phone",text:"手机号码",rightText:""},{id:3,type:"email",text:"电子邮箱",rightText:"未设置"},{id:4,type:"faceback",text:"反馈与建议",rightText:"我有话想说"},{id:5,type:"aboutus",text:"协议条款",rightText:""},{id:6,type:"",text:"蒜粒",tag:!0},{id:7,type:"invite_rewards",text:"邀请奖励",rightText:"",dot:f(()=>!c.get("invite_rewards"))},{id:8,type:"my_hashrate",text:"我的蒜粒",rightText:"",dot:f(()=>!c.get("my_hashrate"))},{id:9,type:"hashrate_record",text:"蒜粒记录",rightText:""},{id:10,type:"",text:"模型设置",tag:!0},{id:11,type:"model",text:"默认模型",rightText:""},{id:12,type:"",text:"代理设置",tag:!0},{id:13,type:"proxy_base_url",text:"代理地址",rightText:""},{id:14,type:"api_key",text:"ApiKey",rightText:""}]),k={"--n-dragger-border":"0px","--n-dragger-border-hover":"0px","--n-item-text-color-error":"rgba(0,0,0,0)","--n-item-text-color-success":"rgba(0,0,0,0)","--n-item-border-image-card-error":"0px","--n-dragger-color":"rgba(0,0,0,0)"},C=()=>{a.push({name:x.query.origin||"dialogue"})},w=({type:e,tag:t})=>{if(!t){["invite_rewards","my_hashrate"].includes(e)&&c.set({key:e});let l="userEdit";g.smallRef.value||(l="d_"+l),a.push({name:l,query:{type:e}})}},R=e=>{const t=Object.keys(e);n.forEach((l,B)=>{t.includes(l.type)&&(n[B].rightText=e[l.type]),e.apiKey&&(n.find(i=>i.type=="api_key").rightText="已设置"),e.phoneNum&&(n.find(i=>i.type=="phone").rightText=e.phoneNum),e.inviteCode&&(n.find(i=>i.type=="invite_rewards").rightText=e.inviteCode),e.proxyBaseUrl&&(n.find(i=>i.type=="proxy_base_url").rightText=e.proxyBaseUrl),e.coins&&(n.find(i=>i.type=="my_hashrate").rightText=e.coins+"粒")})},S=({imgs:e,url:t})=>{s.value=t,u.setUser({field:"avatar",value:t})},U=()=>{m("logout")};return K(()=>{if(!u.loginStatus)return a.push({name:"dialogue"});u.getUser(!0).then(e=>{R(e),s.value=e.avatar}),b("logout",e=>y(this,null,function*(){if(e){const t=a.currentRoute.value.name;yield u.logOut(),p.loginOutClear(),t=="dialogue"?d.emit("dialogue_event",{type:"logout"}):a.push({name:"dialogue",query:{type:"add",reload:1}})}}))}),M(()=>{T()}),(e,t)=>(P(),W("div",J,[o("div",{class:"top_bar flex_b flex_sx_center"},[o("div",{class:"flex_sx_center back hover_bg",tabindex:"0",onClick:C},t[0]||(t[0]=[o("span",{class:"iconfont icon-rollback",style:{"font-size":"20px"}},null,-1),o("span",{class:"text",style:{"margin-left":"5px"}},"返回",-1)])),o("div",{class:"flex_sx_center back hover_bg",tabindex:"0",onClick:U},t[1]||(t[1]=[o("span",{class:"iconfont icon-logout",style:{"font-size":"20px"}},null,-1)]))]),o("div",Q,[o("div",X,[h($,{class:"avater_upload",imgs:s.value,listType:"text",showFileList:!1,style:k,onSuccess:S},{default:v(()=>[h(F(G),{abstract:""},{default:v(({handleClick:l})=>[H(o("img",{class:"avater_img",src:s.value,alt:"",onClick:Y(l,["stop"])},null,8,ee),[[I,s.value]])]),_:1})]),_:1},8,["imgs"])]),h(Z,{list:n,onRightClick:w},null,8,["list"])])]))}};export{le as default};
